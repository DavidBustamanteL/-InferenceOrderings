# Inference Orderings DMCP
## Replication file to Dirichlet Monte Carlo Perturbations - Barbaro & Bustamante Lazo

This repository implements the function ```run_one_election()``` to estimate Condorcet cycle probabilities in ranked-choice elections using Dirichlet Monte Carlo perturbations of empirically observed preference distributions.

The function evaluates all 3-candidate subsets **(triplets)** in an election and computes the probability of observing a majority cycle under sampling uncertainty.

This README focuses exclusively on the main function and its internal subfunctions.

# Main Function

## ```run_one_election(df, N, phi, seed, pseudocount, ord_levels)```

This function executes the complete Condorcet-cycle simulation pipeline for a single election.

# Arguments

- **df**: a data.frame containing respondent-level rankings (rows = individuals, columns = candidates)

- **N**: number of Dirichlet draws per triplet

- **phi**: concentration scaling parameter for the Dirichlet distribution

- **seed**: random seed for reproducibility

- **pseudocount**: unused placeholder argument

- **ord_levels**: vector of the 13 admissible ranking orderings for three candidates (including ties)



# Returns

The function returns a list containing:

- **ranking_all**: empirical ranking frequencies for each triplet

- **vec_list**: 13-category count vectors for each triplet

- **prop_list**: normalized proportions for each triplet

- **perturbations**: Dirichlet draws for each triplet

- **outcomes_by_triplet**: Condorcet outcomes for each draw

- **overall_table**: aggregated outcome counts

- **cycle_rate_by_triplet**: cycle probability per triplet

- **overall_cycle_rate**: global cycle probability

- **baseline_outcome**: Condorcet outcome computed from empirical proportions (no perturbation)


# Internal Workflow
## 1. Triplet Construction

All triplets are generated by combining the candidate columns.

For an election with m candidates, the number of triplets equals choose(m, 3).

Within each triplet, candidates are relabeled locally as A, B, and C to standardize processing.
